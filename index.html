<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EU5 ModHelper</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header class="header">
        <h1>EU5 <span>ModHelper</span></h1>
        <div class="header-controls">
            <button id="load-folder">Load EU5 Folder</button>
            <span id="folder-info"></span>
            <button id="load-mods-btn" style="display:none;">Load Mods</button>
            <button id="new-mod-btn" style="display:none;">New Mod</button>
            <div class="mod-selector" id="mod-selector" style="display:none;">
                <select id="mod-select">
                    <option value="">No Mod (Base Game)</option>
                </select>
            </div>
            <button id="debug-btn" style="background:#e5c07b;color:#000;margin-left:10px;display:none;">Debug</button>
        </div>
    </header>

    <div class="toolbar">
        <div class="categories" id="categories"></div>
    </div>

    <div class="search-row">
        <div class="search-box" id="search"></div>
        <div class="search-row-right">
            <div class="items-count" id="items-count"></div>
            <div class="filter-buttons">
                <button class="filter-toggle-btn" id="filter-toggle" title="Toggle Filters">
                    <svg viewBox="0 0 24 24" width="16" height="16">
                        <path d="M3 4h18v2H3V4zm3 7h12v2H6v-2zm3 7h6v2H9v-2z" fill="currentColor"/>
                    </svg>
                    <span>Filters</span>
                </button>
                <button class="filter-clear-btn" id="filter-clear" title="Clear All Filters">
                    <svg viewBox="0 0 24 24" width="14" height="14">
                        <path d="M18 6L6 18M6 6l12 12" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div class="filters-dropdown" id="filters"></div>

    <main class="main-content">
        <div class="items-grid" id="items-grid"></div>
    </main>

    <!-- New Mod Modal -->
    <div class="modal-overlay" id="new-mod-modal" style="display:none;">
        <div class="modal">
            <div class="modal-header">
                <h2>Create New Mod</h2>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="mod-name">Mod Name *</label>
                    <input type="text" id="mod-name" placeholder="My Awesome Mod" required>
                </div>
                <div class="form-group">
                    <label for="mod-id">Mod ID *</label>
                    <input type="text" id="mod-id" placeholder="my_awesome_mod">
                    <span class="form-hint">Lowercase, underscores only. Auto-generated from name.</span>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="mod-version">Version</label>
                        <input type="text" id="mod-version" value="1.0.0" placeholder="1.0.0">
                    </div>
                    <div class="form-group">
                        <label for="mod-game-version">Game Version</label>
                        <input type="text" id="mod-game-version" value="1.0.*" placeholder="1.0.*">
                    </div>
                </div>
                <div class="form-group">
                    <label for="mod-description">Description</label>
                    <textarea id="mod-description" rows="3" placeholder="A brief description of your mod..."></textarea>
                </div>
                <div class="form-group">
                    <label>Folders to Include</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="folder-common" checked> common/ (gameplay data)</label>
                        <label><input type="checkbox" id="folder-events"> events/</label>
                        <label><input type="checkbox" id="folder-localization" checked> localization/</label>
                        <label><input type="checkbox" id="folder-gfx"> gfx/ (graphics)</label>
                        <label><input type="checkbox" id="folder-gui"> gui/ (interface)</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modal-cancel">Cancel</button>
                <button class="btn btn-primary" id="modal-create">Create Mod</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Core -->
    <script src="js/parser.js"></script>
    <script src="js/loader.js"></script>
    <script src="js/mod-loader.js"></script>
    <script src="js/mod-creator.js"></script>

    <!-- Utilities -->
    <script src="js/utils/colors.js"></script>

    <!-- Infrastructure -->
    <script src="js/reference-manager.js"></script>
    <script src="js/category-registry.js"></script>

    <!-- Handlers -->
    <script src="js/handlers/base-handler.js"></script>
    <script src="js/handlers/default-handler.js"></script>
    <script src="js/handlers/advances-handler.js"></script>
    <script src="js/handlers/religions-handler.js"></script>
    <script src="js/handlers/cultures-handler.js"></script>
    <script src="js/handlers/laws-handler.js"></script>
    <script src="js/handlers/heir-selections-handler.js"></script>
    <script src="js/handlers/buildings-handler.js"></script>
    <script src="js/handlers/goods-handler.js"></script>
    <script src="js/handlers/institutions-handler.js"></script>
    <script src="js/handlers/unit-types-handler.js"></script>
    <script src="js/handlers/casus-belli-handler.js"></script>
    <script src="js/handlers/subject-types-handler.js"></script>
    <script src="js/handlers/international-orgs-handler.js"></script>
    <script src="js/handlers/modifier-types-handler.js"></script>
    <script src="js/handlers/static-modifiers-handler.js"></script>
    <script src="js/handlers/traits-handler.js"></script>
    <script src="js/handlers/events-handler.js"></script>
    <script src="js/handlers/formable-countries-handler.js"></script>
    <script src="js/handlers/climates-handler.js"></script>
    <script src="js/handlers/vegetation-handler.js"></script>
    <script src="js/handlers/topography-handler.js"></script>
    <script src="js/handlers/locations-handler.js"></script>
    <script src="js/handlers/map-definitions-handler.js"></script>
    <script src="js/handlers/mod-changes-handler.js"></script>
    <!-- Components -->
    <script src="js/components/tree-view.js"></script>
    <script src="js/components/search.js"></script>
    <script src="js/components/filters.js"></script>
    <script src="js/components/item-card.js"></script>

    <!-- Main App -->
    <script src="js/app.js"></script>
</body>
</html>
